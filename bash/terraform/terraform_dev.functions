# vim: et sr sw=4 ts=4 smartindent syntax=sh:
#
# @overview
# >
# > Functions you might need while you're developing terraform code
# >
# > Source habitual/{std,git}.functions before calling functions in here.
# >

# @desc Initiates an empty Terraform module
#
# @example
# tf_init_module iam_users
#

tf_init_module() {
    local m="${1%/}" # module
    local tp="$(realpath -- $(dirname $BASH_SOURCE))/templates/dev/module"
    if [ -z $m ] || [ -d $m ]; then
        e "Empty module name or the directory ${m} already exists."
        return 1
    fi

    d "Generating module skel from $tp -> $(pwd)/$m"
    if mkdir $m && cp -av $template_path/. $m >/dev/null
    then
        i "Module $m initialised"
        return 0
    else
        red_e "Failed to initialise module $m"
        return 1
    fi

}
